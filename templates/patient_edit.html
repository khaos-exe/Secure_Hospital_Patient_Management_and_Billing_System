{% extends "base.html" %}

{% block title %}Edit Patient{% endblock %}

{% block content %}
<a href="{{ url_for('patient_detail', patient_id=patient.patient_id) }}" class="back-link">‚Üê Back to Patient Detail</a>
<h1>Edit Patient</h1>
<p class="subtitle">Update contact and identifiers</p>

{% if error %}
<div class="alert error">{{ error }}</div>
{% endif %}

<form method="POST" action="" autocomplete="off" class="smart-form">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="field-card">
        <label for="full_name">Full Name <span class="required">*</span></label>
        <input type="text" id="full_name" name="full_name" value="{{ patient.full_name }}" maxlength="160" required>
    </div>

    <div class="field-card">
        <label for="email">Email <span class="required">*</span></label>
        <input type="email" id="email" name="email" value="{{ patient.email }}" required>
        <div class="hint">Used for login; stored encrypted.</div>
    </div>

    <div class="field-card">
        <label for="phone">Phone</label>
        <input type="tel" id="phone" name="phone" value="{{ patient.phone_number }}" maxlength="20">
    </div>

    <div class="field-card">
        <label for="address">Address</label>
        <textarea id="address" name="address" maxlength="240">{{ patient.home_address }}</textarea>
    </div>

    <div class="field-card">
        <label for="mrn">MRN</label>
        <input type="text" id="mrn" name="mrn" value="{{ patient.mrn }}" maxlength="64">
    </div>

    <div class="field-card">
        <label for="insurance">Insurance Policy</label>
        <input type="text" id="insurance" name="insurance" value="{{ patient.insurance_policy }}" maxlength="64">
    </div>

    <button type="submit" class="submit-btn tilt">Save Changes</button>
</form>
{% endblock %}
